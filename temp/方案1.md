# Claude Code æ¡Œé¢å® ç‰© - ç®€åŒ–æ–¹æ¡ˆ

åŸºäºä½ çš„æŠ€æœ¯èƒŒæ™¯å’Œéœ€æ±‚ï¼Œæˆ‘ä¸ºä½ è®¾è®¡ä¸€ä¸ª**ç®€å•å¯è¡Œ**çš„æ¡Œé¢å® ç‰©æ–¹æ¡ˆï¼Œåˆ©ç”¨ç°æœ‰å·¥å…·é™ä½å¼€å‘éš¾åº¦ã€‚

---

## ğŸ¯ æ¨èæ–¹æ¡ˆï¼šPython + ç°æœ‰ç›‘æ§å·¥å…·

### ğŸ“‹ æ•´ä½“æ¶æ„

```
æ¡Œé¢å® ç‰© (Python) â†â”€â”€â†’ Claudeç›‘æ§å·¥å…· â†â”€â”€â†’ Claude Codeè¿›ç¨‹
     â”‚                    â”‚
   æ’­æ”¾GIF              è·å–çŠ¶æ€
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆé€‰æ‹©ï¼ˆæœ€ç®€å•ç»„åˆï¼‰

### **1. æ¡Œé¢å® ç‰©éƒ¨åˆ†**

| é¡¹ç›® | é€‰æ‹© |
|------|------|
| **è¯­è¨€** | Python 3.x |
| **GUIæ¡†æ¶** | tkinterï¼ˆPythonè‡ªå¸¦ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼‰ |
| **GIFæ’­æ”¾** | Pillowåº“ |
| **éš¾åº¦** | â­â­ï¼ˆæœ‰å®Œæ•´æ•™ç¨‹ï¼‰ |

### **2. ClaudeçŠ¶æ€ç›‘æ§éƒ¨åˆ†**

| é¡¹ç›® | é€‰æ‹© |
|------|------|
| **å·¥å…·** | Claude-Code-Usage-Monitorï¼ˆç°æˆå·¥å…·ï¼‰ |
| **é€šä¿¡æ–¹å¼** | æœ¬åœ°æ–‡ä»¶/ç®€å•Socket |
| **éš¾åº¦** | â­ï¼ˆç›´æ¥ä½¿ç”¨ï¼‰ |

---

## ğŸš€ å®ç°æ­¥éª¤ï¼ˆè¯¦ç»†åˆ†è§£ï¼‰

### **ç¬¬ä¸€æ­¥ï¼šå®‰è£…åŸºç¡€ç¯å¢ƒ**ï¼ˆ10åˆ†é’Ÿï¼‰

```bash
# å®‰è£…Pythonï¼ˆå‹¾é€‰Add to PATHï¼‰

# å®‰è£…å¿…è¦åº“
pip install pillow psutil
```

### **ç¬¬äºŒæ­¥ï¼šè·å–ClaudeçŠ¶æ€**ï¼ˆæœ€ç®€å•æ–¹æ³•ï¼‰

```python
# monitor_claude.py - ç›‘æ§ClaudeçŠ¶æ€
import psutil
import json
import time

def get_claude_status():
    """è·å–Claude Codeè¿›ç¨‹çŠ¶æ€"""
    for proc in psutil.process_iter(['pid', 'name', 'cmdline']):
        if proc.info['name'] and 'claude' in proc.info['name'].lower():
            return {
                'status': 'running',
                'pid': proc.info['pid'],
                'cpu_percent': proc.cpu_percent(),
                'memory_info': proc.memory_info()._asdict()
            }
    return {'status': 'not_running'}

# æŒç»­ç›‘æ§å¹¶å†™å…¥æ–‡ä»¶
while True:
    status = get_claude_status()
    with open('claude_status.json', 'w') as f:
        json.dump(status, f)
    time.sleep(2)  # æ¯2ç§’æ›´æ–°ä¸€æ¬¡
```

### **ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºæ¡Œé¢å® ç‰©**ï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

```python
# desktop_pet.py - æ¡Œé¢å® ç‰©ä¸»ç¨‹åº
import tkinter as tk
from PIL import Image, ImageTk, ImageSequence
import json
import os

class ClaudePet:
    def __init__(self):
        self.root = tk.Tk()
        self.root.overrideredirect(True)  # æ— è¾¹æ¡†
        self.root.attributes('-topmost', True)  # ç½®é¡¶
        self.root.attributes('-transparentcolor', 'white')  # é€æ˜èƒŒæ™¯

        # GIFèµ„æºè·¯å¾„
        self.gifs = {
            'idle': 'gifs/idle.gif',
            'working': 'gifs/working.gif',
            'thinking': 'gifs/thinking.gif',
            'error': 'gifs/error.gif'
        }

        # åŠ è½½åˆå§‹GIF
        self.load_gif('idle')

        # ç»‘å®šäº‹ä»¶
        self.root.bind('<Button-1>', self.on_click)
        self.root.bind('<B1-Motion>', self.on_drag)

        # å¯åŠ¨çŠ¶æ€ç›‘æ§
        self.start_status_monitor()

    def load_gif(self, state):
        """åŠ è½½æŒ‡å®šçŠ¶æ€çš„GIF"""
        gif_path = self.gifs.get(state, self.gifs['idle'])
        if os.path.exists(gif_path):
            self.gif_image = ImageTk.PhotoImage(file=gif_path)
            self.label = tk.Label(self.root, image=self.gif_image, bg='white')
            self.label.pack()

    def on_click(self, event):
        """å¼€å§‹æ‹–æ‹½"""
        self.drag_start_x = event.x
        self.drag_start_y = event.y

    def on_drag(self, event):
        """æ‹–æ‹½ç§»åŠ¨"""
        x = self.root.winfo_x() + (event.x - self.drag_start_x)
        y = self.root.winfo_y() + (event.y - self.drag_start_y)
        self.root.geometry(f"+{x}+{y}")

    def start_status_monitor(self):
        """å¯åŠ¨çŠ¶æ€ç›‘æ§å¾ªç¯"""
        self.update_status()

    def update_status(self):
        """æ›´æ–°å® ç‰©çŠ¶æ€"""
        try:
            with open('claude_status.json', 'r') as f:
                status = json.load(f)

            # æ ¹æ®çŠ¶æ€åˆ‡æ¢GIF
            if status['status'] == 'not_running':
                self.load_gif('idle')
            else:
                cpu = status.get('cpu_percent', 0)
                if cpu > 10:
                    self.load_gif('working')
                elif cpu > 1:
                    self.load_gif('thinking')
                else:
                    self.load_gif('idle')

        except Exception as e:
            print(f"çŠ¶æ€è¯»å–é”™è¯¯: {e}")
            self.load_gif('error')

        # æ¯2ç§’æ›´æ–°ä¸€æ¬¡
        self.root.after(2000, self.update_status)

    def run(self):
        """è¿è¡Œå® ç‰©"""
        self.root.mainloop()

if __name__ == '__main__':
    pet = ClaudePet()
    pet.run()
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
claude_pet/
â”œâ”€â”€ monitor_claude.py    # çŠ¶æ€ç›‘æ§è„šæœ¬
â”œâ”€â”€ desktop_pet.py      # æ¡Œé¢å® ç‰©ä¸»ç¨‹åº
â”œâ”€â”€ claude_status.json  # çŠ¶æ€æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â””â”€â”€ gifs/               # GIFåŠ¨ç”»æ–‡ä»¶å¤¹
    â”œâ”€â”€ idle.gif
    â”œâ”€â”€ working.gif
    â”œâ”€â”€ thinking.gif
    â””â”€â”€ error.gif
```

---

## âœ… ä¼˜ç‚¹

1. **ä»£ç é‡å°‘** - æ ¸å¿ƒä»£ç ä¸åˆ°100è¡Œ
2. **ä¾èµ–å°‘** - åªéœ€è¦ psutil å’Œ pillow
3. **å®¹æ˜“ç†è§£** - é€»è¾‘æ¸…æ™°ï¼Œé€‚åˆå…¥é—¨
4. **å®¹æ˜“æ‰©å±•** - å¯ä»¥è½»æ¾æ·»åŠ æ›´å¤šçŠ¶æ€å’ŒåŠ¨ç”»

---

## âš ï¸ å±€é™æ€§

1. **çŠ¶æ€è¯†åˆ«ç®€å•** - åªèƒ½é€šè¿‡CPUä½¿ç”¨ç‡åˆ¤æ–­
2. **æ— çª—å£ç»‘å®š** - æ— æ³•åŒºåˆ†å…·ä½“åœ¨åšä»€ä¹ˆæ“ä½œ
3. **æ ·å¼æœ´ç´ ** - åªæœ‰åŸºæœ¬çš„GIFæ’­æ”¾

å¦‚éœ€æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œè¯·å‚è€ƒã€Œæ–¹æ¡ˆ2ã€æˆ–ã€Œæ–¹æ¡ˆ3ã€ã€‚
