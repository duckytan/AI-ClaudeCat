# AI-ClaudeCat v4.1.2 - é¡¹ç›®æ–‡æ¡£

**ç‰ˆæœ¬**: v4.1.2  
**æœ€åæ›´æ–°**: 2026-02-06  
**çŠ¶æ€**: ğŸš€ Production Readyï¼ˆ27 ç§å·¥å…·æ”¯æŒï¼Œ100% PixelHQ è¦†ç›–ï¼‰

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
3. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
4. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
5. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
6. [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
7. [API æ–‡æ¡£](#api-æ–‡æ¡£)
8. [ç‰ˆæœ¬å†å²](#ç‰ˆæœ¬å†å²)

---

## é¡¹ç›®æ¦‚è¿°

AI-ClaudeCat æ˜¯ä¸€æ¬¾ä¸“ä¸º **Claude Code** è®¾è®¡çš„æ™ºèƒ½çŠ¶æ€ç›‘æ§å·¥å…·ï¼Œé€šè¿‡ç›‘æ§å®˜æ–¹ JSONL æ—¥å¿—æ–‡ä»¶ï¼Œå®æ—¶è¿½è¸ª AI çš„è¿è¡ŒçŠ¶æ€ã€å·¥å…·è°ƒç”¨å’Œ Token ä½¿ç”¨æƒ…å†µã€‚

### æ ¸å¿ƒç†å¿µ

- **å¯é æ€§ä¼˜å…ˆ**: é‡‡ç”¨ Claude Code å®˜æ–¹æ—¥å¿—æ•°æ®æºï¼ˆå·²éªŒè¯ï¼Œæ ¼å¼ç¨³å®šï¼‰
- **å·¥å…·çº§ç²¾åº¦**: ä¸ä»…çŸ¥é“ AI åœ¨"å·¥ä½œ"ï¼Œè¿˜çŸ¥é“åœ¨"è¯»æ–‡ä»¶"è¿˜æ˜¯"å†™ä»£ç "
- **éšç§ä¿æŠ¤**: å†…ç½®ç™½åå•è¿‡æ»¤æœºåˆ¶ï¼Œåªè¾“å‡ºå…ƒæ•°æ®
- **æ’ä»¶åŒ–æ¶æ„**: æ˜“æ‰©å±•ï¼Œæ”¯æŒæ›´å¤š AI ç¼–ç¨‹å·¥å…·

### åº”ç”¨åœºæ™¯

1. **æ¡Œé¢å® ç‰© GUI** - å®æ—¶æ˜¾ç¤º AI çŠ¶æ€çš„å¯çˆ±å® ç‰©
2. **æµè§ˆå™¨æ’ä»¶** - åœ¨æµè§ˆå™¨ä¸­å±•ç¤º AI å·¥ä½œçŠ¶æ€
3. **ç§»åŠ¨ç«¯ App** - è¿œç¨‹ç›‘æ§ AI ç¼–ç¨‹è¿›åº¦
4. **æ•°æ®ç»Ÿè®¡** - Token ä½¿ç”¨é‡ã€å·¥å…·è°ƒç”¨é¢‘ç‡åˆ†æ
5. **å¼€å‘è°ƒè¯•** - äº†è§£ AI çš„å·¥ä½œæµç¨‹å’Œå†³ç­–

---

## æ ¸å¿ƒç‰¹æ€§

### âœ… å·²å®ç°ï¼ˆv4.1.2ï¼‰

#### 1. **å·¥å…·æ”¯æŒ**ï¼ˆæ ¸å¿ƒäº®ç‚¹ï¼‰
- ğŸ¯ **27 ç§å·¥å…·æ”¯æŒ** - å®Œå…¨è¦†ç›– PixelHQ-bridge å·¥å…·
- ğŸ”Œ **MCP é€šç”¨æ”¯æŒ** - è‡ªåŠ¨è¯†åˆ« `mcp__*` å‰ç¼€çš„ä»»æ„ MCP å·¥å…·
- ğŸ“‹ **è®¡åˆ’æ¨¡å¼æ”¯æŒ** - `EnterPlanMode`, `ExitPlanMode`
- ğŸ““ **Notebook ç¼–è¾‘** - `NotebookEdit` å·¥å…·æ”¯æŒ
- ğŸ¨ **ç‰¹æ®Šè¾“å‡º** - æ¯ä¸ªå·¥å…·éƒ½æœ‰è‡ªå®šä¹‰å›¾æ ‡å’Œè¾“å‡º

#### 2. **æ—¥å¿—ç›‘æ§**ï¼ˆæ ¸å¿ƒï¼‰
- ğŸ“ ç›‘æ§ `~/.claude/projects/**/*.jsonl`
- ğŸ”„ å¢é‡è¯»å–ï¼ˆè®°å½•æ–‡ä»¶ä½ç½®ï¼Œä½ CPU å ç”¨ï¼‰
- ğŸ“ JSONL è§£æï¼ˆå®˜æ–¹æ ¼å¼ï¼Œç¨³å®šå¯é ï¼‰
- ğŸ¯ å®æ—¶æ€§é«˜ï¼ˆæ–‡ä»¶å˜åŒ–ç«‹å³è§¦å‘ï¼‰

#### 3. **å·¥å…·çº§çŠ¶æ€æ£€æµ‹**
- **Thinking** - AI æ€è€ƒä¸­ï¼ˆ`thinking` å—ï¼‰
- **Responding** - AI å›å¤ä¸­ï¼ˆ`text` å—ï¼‰
- **Reading** - è¯»å–æ–‡ä»¶ï¼ˆ`Read` å·¥å…·ï¼‰
- **Writing** - å†™å…¥æ–‡ä»¶ï¼ˆ`Write` å·¥å…·ï¼‰
- **Editing** - ç¼–è¾‘æ–‡ä»¶ï¼ˆ`Edit` å·¥å…·ï¼‰
- **Executing** - æ‰§è¡Œå‘½ä»¤ï¼ˆ`Bash` å·¥å…·ï¼‰
- **Searching** - æœç´¢ä»£ç ï¼ˆ`Grep`ã€`Glob` å·¥å…·ï¼‰
- **Fetching** - ç½‘ç»œè¯·æ±‚ï¼ˆ`WebFetch`ã€`WebSearch` å·¥å…·ï¼‰
- **Spawning** - æ´¾ç”Ÿå­ Agentï¼ˆ`Task` å·¥å…·ï¼‰
- **Waiting** - ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼ˆ`AskUserQuestion` å·¥å…·ï¼‰

#### 4. **Token ç»Ÿè®¡**
- ğŸ“Š è¾“å…¥ Tokenï¼ˆinput_tokensï¼‰
- ğŸ“Š è¾“å‡º Tokenï¼ˆoutput_tokensï¼‰
- ğŸ“Š ç¼“å­˜è¯»å–ï¼ˆcache_read_input_tokensï¼‰
- ğŸ“Š ç¼“å­˜å†™å…¥ï¼ˆcache_creation_input_tokensï¼‰
- ğŸ“Š ç¼“å­˜å‘½ä¸­ç‡è®¡ç®—
- ğŸ“Š å¹³å‡æ¯åˆ†é’Ÿä½¿ç”¨é‡

#### 5. **éšç§ä¿æŠ¤**
- ğŸ”’ ç™½åå•è¿‡æ»¤ï¼ˆåªè¾“å‡ºå…è®¸çš„å­—æ®µï¼‰
- ğŸ”’ æ–‡ä»¶è·¯å¾„ â†’ åªä¿ç•™æ–‡ä»¶å
- ğŸ”’ å‘½ä»¤å†…å®¹ â†’ ä¸è¾“å‡º
- ğŸ”’ æ–‡ä»¶å†…å®¹ â†’ ä¸è¾“å‡º
- ğŸ”’ åªä¿ç•™å…ƒæ•°æ®ï¼ˆå·¥å…·åç§°ã€çŠ¶æ€ã€Tokenï¼‰

#### 6. **å¤šè¾“å‡ºåè®®**
- ğŸŒ **WebSocket** (ws://127.0.0.1:8765) - å®æ—¶æ¨é€
- ğŸŒ **HTTP REST API** (http://127.0.0.1:8080) - æŸ¥è¯¢æ¥å£
- ğŸ“ **Stdout** - ç»ˆç«¯è¾“å‡ºï¼ˆè°ƒè¯•ï¼‰
- ğŸ’¾ **SQLite** - å†å²è®°å½•å­˜å‚¨

#### 7. **äº‹ä»¶å†å²**
- ğŸ’¾ SQLite æ•°æ®åº“å­˜å‚¨
- ğŸ” æ—¶é—´èŒƒå›´æŸ¥è¯¢
- ğŸ“Š ç»Ÿè®¡åˆ†ææ¥å£
- ğŸ“ˆ Token ä½¿ç”¨è¶‹åŠ¿

---

## æŠ€æœ¯æ¶æ„

### v4.1.2 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AI-ClaudeCat v4.1.2                     â”‚
â”‚            (27 ç§å·¥å…·æ”¯æŒï¼Œ100% PixelHQ è¦†ç›–)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®æºå±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ~/.claude/projects/**/*.jsonl           â”‚
â”‚  - session-abc123.jsonl                  â”‚
â”‚  - session-abc123/subagents/xyz.jsonl    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
ç›‘æ§å±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ClaudeLogPlugin (æ ¸å¿ƒæ’ä»¶) â­            â”‚
â”‚  - Watchdog æ–‡ä»¶ç›‘æ§                      â”‚
â”‚  - å¢é‡è¯»å– (filePositions)              â”‚
â”‚  - JSONL è§£æ                            â”‚
â”‚  - çŠ¶æ€æ¨æ–­ (thinking/tool_use)          â”‚
â”‚  - Token ç»Ÿè®¡                            â”‚
â”‚  - Agent è¿½è¸ª                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ emit(StateEvent)
           â–¼
ä¸­é—´ä»¶å±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Middleware                              â”‚
â”‚  â”œâ”€â”€ EventBus (äº‹ä»¶åˆ†å‘)                 â”‚
â”‚  â”œâ”€â”€ StateFusion (çŠ¶æ€èåˆ)              â”‚
â”‚  â”œâ”€â”€ PrivacyFilter (éšç§è¿‡æ»¤) â­          â”‚
â”‚  â””â”€â”€ TokenStats (Token ç»Ÿè®¡) â­           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
è¾“å‡ºå±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OutputAdapters                          â”‚
â”‚  â”œâ”€â”€ WebSocketAdapter (ws://8765)        â”‚
â”‚  â”œâ”€â”€ HTTPAdapter (http://8080)           â”‚
â”‚  â”œâ”€â”€ StdoutAdapter (ç»ˆç«¯è¾“å‡º)            â”‚
â”‚  â””â”€â”€ HistoryAdapter (SQLite) â­           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
æ¶ˆè´¹ç«¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  - æ¡Œé¢å® ç‰© GUI (Electron/Qt)            â”‚
â”‚  - æµè§ˆå™¨æ’ä»¶ (Chrome Extension)         â”‚
â”‚  - ç§»åŠ¨ç«¯ App (React Native)             â”‚
â”‚  - CLI å·¥å…·                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

```
æ–‡ä»¶å˜åŒ– (*.jsonl)
    â”‚
    â–¼
Watchdog ç›‘æ§
    â”‚ on_modified
    â–¼
ClaudeLogPlugin
    â”‚
    â”œâ”€â–º å¢é‡è¯»å–æ–°è¡Œ
    â”œâ”€â–º è§£æ JSONL
    â”œâ”€â–º æ¨æ–­çŠ¶æ€
    â””â”€â–º emit(StateEvent)
           â”‚
           â–¼
Middleware
           â”‚
           â”œâ”€â–º PrivacyFilter  # éšç§è¿‡æ»¤
           â”œâ”€â–º TokenStats      # Token ç»Ÿè®¡
           â””â”€â–º StateFusion     # çŠ¶æ€èåˆ
                   â”‚
                   â–¼
           for adapter in adapters:
               await adapter.send(event)
                   â”‚
                   â”œâ”€â–º WebSocket â†’ å‰ç«¯
                   â”œâ”€â–º HTTP â†’ REST API
                   â”œâ”€â–º Stdout â†’ ç»ˆç«¯
                   â””â”€â–º History â†’ SQLite
```

### ç›®å½•ç»“æ„

```
AI-ClaudeCat/
â”œâ”€â”€ main.py                    # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.json                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt           # ä¾èµ–æ¸…å•
â”œâ”€â”€ CLAUDE.md                  # æœ¬æ–‡ä»¶
â”œâ”€â”€ AGENTS.md                  # é¡¹ç›®çŸ¥è¯†åº“
â”œâ”€â”€ README.md                  # é¡¹ç›®æ€»è§ˆ
â”œâ”€â”€ QUICKSTART.md              # å¿«é€Ÿå¼€å§‹
â”œâ”€â”€ CONFIG.md                  # é…ç½®è¯´æ˜
â”‚
â”œâ”€â”€ src/                       # æºä»£ç 
â”‚   â”œâ”€â”€ plugins/               # æ’ä»¶å®ç°
â”‚   â”‚   â”œâ”€â”€ base.py           # BasePluginã€StateEventã€Status
â”‚   â”‚   â””â”€â”€ claude_log.py     # ClaudeLogPluginï¼ˆæ ¸å¿ƒï¼‰â­
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/            # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ core.py           # Middleware ä¸»é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ event_bus.py      # EventBus äº‹ä»¶åˆ†å‘
â”‚   â”‚   â”œâ”€â”€ fusion.py         # StateFusion çŠ¶æ€èåˆ
â”‚   â”‚   â”œâ”€â”€ privacy.py        # PrivacyFilter éšç§è¿‡æ»¤ â­
â”‚   â”‚   â””â”€â”€ token_stats.py    # TokenStats Token ç»Ÿè®¡ â­
â”‚   â”‚
â”‚   â”œâ”€â”€ adapters/              # è¾“å‡ºé€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ base.py           # OutputAdapter åŸºç±»
â”‚   â”‚   â”œâ”€â”€ websocket_adapter.py  # WebSocket å®æ—¶æ¨é€
â”‚   â”‚   â”œâ”€â”€ http_adapter.py   # HTTP REST API
â”‚   â”‚   â”œâ”€â”€ stdout_adapter.py # æ ‡å‡†è¾“å‡º
â”‚   â”‚   â””â”€â”€ history_adapter.py # SQLite å­˜å‚¨ â­
â”‚   â”‚
â”‚   â””â”€â”€ utils/                 # å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ window_detector.py # çª—å£æ£€æµ‹ï¼ˆä¿ç•™ï¼Œæš‚ä¸å®è£…ï¼‰
â”‚       â””â”€â”€ README.md          # å·¥å…·è¯´æ˜
â”‚
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”‚   â””â”€â”€ research_notes.md      # æŠ€æœ¯ç ”ç©¶ç¬”è®°
â”‚
â”œâ”€â”€ data/                      # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ history.db             # äº‹ä»¶å†å²æ•°æ®åº“
â”‚
â””â”€â”€ backup-v3.1/               # v3.1 å¤‡ä»½
    â”œâ”€â”€ src/                   # æ—§æ’ä»¶ä»£ç 
    â”œâ”€â”€ docs/                  # æ—§æ–‡æ¡£
    â””â”€â”€ Desktop-Pixel-Pet/     # å…¶ä»–é¡¹ç›®å¤‡ä»½
```

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

**ä¾èµ–åˆ—è¡¨**:
- `watchdog` - æ–‡ä»¶ç›‘æ§
- `websockets` - WebSocket æœåŠ¡å™¨
- `flask` - HTTP æœåŠ¡å™¨
- `flask-cors` - CORS æ”¯æŒ
- `psutil` - è¿›ç¨‹ç›‘æ§ï¼ˆå¯é€‰ï¼Œç”¨äºè¿›ç¨‹å­˜æ´»æ£€æµ‹ï¼‰

### 2. é…ç½®

ç¼–è¾‘ `config.json`ï¼š

```json
{
  "version": "4.0.0",
  "claude": {
    "projects_dir": "auto"  // è‡ªåŠ¨æ£€æµ‹ï¼Œæˆ–æŒ‡å®šè·¯å¾„
  },
  "middleware": {
    "privacy_filter": {
      "enabled": true  // å¯ç”¨éšç§ä¿æŠ¤
    }
  }
}
```

### 3. è¿è¡Œ

```bash
python main.py
```

**è¾“å‡º**:
```
=== AI-ClaudeCat v4.0 ===
Status monitoring for Claude Code

âœ“ Claude Code detected at C:\Users\YourName\.claude\projects
âœ“ Middleware initialized
âœ“ WebSocket server on port 8765
âœ“ HTTP server on port 8080
âœ“ Privacy filter enabled
âœ“ History storage enabled

[ClaudeLogPlugin] Started, watching: C:\Users\YourName\.claude\projects
```

### 4. æµ‹è¯•

**WebSocket å®¢æˆ·ç«¯** (æµè§ˆå™¨æ§åˆ¶å°):
```javascript
const ws = new WebSocket('ws://127.0.0.1:8765');
ws.onmessage = (event) => {
    console.log('AI Status:', JSON.parse(event.data));
};
```

**HTTP æŸ¥è¯¢**:
```bash
# å½“å‰çŠ¶æ€
curl http://127.0.0.1:8080/api/status

# å†å²äº‹ä»¶
curl http://127.0.0.1:8080/api/history?limit=10

# Token ç»Ÿè®¡
curl http://127.0.0.1:8080/api/tokens
```

---

## é…ç½®è¯´æ˜

è¯¦ç»†é…ç½®è¯·å‚è€ƒ [`CONFIG.md`](./CONFIG.md)

### æ ¸å¿ƒé…ç½®é¡¹

#### Claude é…ç½®
```json
{
  "claude": {
    "projects_dir": "auto",           // "auto" æˆ–æŒ‡å®šè·¯å¾„
    "watch_debounce_ms": 100,         // æ–‡ä»¶å˜åŒ–é˜²æŠ–ï¼ˆæ¯«ç§’ï¼‰
    "session_ttl_minutes": 10         // ä¼šè¯å­˜æ´»æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  }
}
```

#### éšç§è¿‡æ»¤é…ç½®
```json
{
  "middleware": {
    "privacy_filter": {
      "enabled": true,
      "whitelist": [
        "method", "event", "tool", "context",
        "session_id", "status", "confidence",
        "tokens", "agent_type", "pattern"
      ]
    }
  }
}
```

#### è¾“å‡ºé€‚é…å™¨é…ç½®
```json
{
  "adapters": {
    "websocket": {
      "enabled": true,
      "port": 8765,
      "host": "127.0.0.1"
    },
    "http": {
      "enabled": true,
      "port": 8080,
      "host": "127.0.0.1",
      "cors": true
    },
    "history": {
      "enabled": true,
      "db_path": "data/history.db",
      "max_events": 10000
    }
  }
}
```

---

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ’ä»¶

```python
# src/plugins/my_plugin.py
from src.plugins.base import BasePlugin, StateEvent, Status

class MyPlugin(BasePlugin):
    def __init__(self, name: str = "my_plugin"):
        super().__init__(name)
    
    def check_available(self) -> bool:
        # æ£€æŸ¥æ’ä»¶æ˜¯å¦å¯ç”¨
        return True
    
    async def detect(self) -> Optional[StateEvent]:
        # æ£€æµ‹çŠ¶æ€
        return StateEvent(
            status=Status.WORKING,
            confidence=0.90,
            source_plugin=self.name,
            details={"info": "..."}
        )
```

### æ·»åŠ æ–°è¾“å‡ºé€‚é…å™¨

```python
# src/adapters/my_adapter.py
from src.adapters.base import OutputAdapter
from src.plugins.base import StateEvent

class MyAdapter(OutputAdapter):
    def __init__(self):
        super().__init__("my_adapter")
    
    async def send(self, event: StateEvent):
        # å‘é€äº‹ä»¶åˆ°ç›®æ ‡
        print(f"Sending to my service: {event.to_dict()}")
```

### äº‹ä»¶æ ¼å¼

**StateEvent**:
```python
{
    "timestamp": "2026-02-06T12:34:56.789Z",
    "status": "working",                    # Status æšä¸¾
    "confidence": 0.95,                      # 0.0 - 1.0
    "source_plugin": "claude_log",           # æ’ä»¶åç§°
    "source_type": "custom",                 # PluginType æšä¸¾
    "priority": 10,                          # ä¼˜å…ˆçº§
    "details": {                             # é¢å¤–ä¿¡æ¯
        "method": "log",
        "event": "tool_use",
        "tool": "Read",
        "context": "main.py",
        "session_id": "abc123"
    }
}
```

---

## API æ–‡æ¡£

### WebSocket API

**è¿æ¥**: `ws://127.0.0.1:8765`

**æ¶ˆæ¯æ ¼å¼**:
```json
{
    "type": "state_change",
    "data": {
        "timestamp": "2026-02-06T12:34:56.789Z",
        "status": "working",
        "confidence": 0.95,
        "details": {
            "tool": "Read",
            "context": "main.py"
        }
    }
}
```

### HTTP REST API

#### GET /api/status
è·å–å½“å‰çŠ¶æ€

**å“åº”**:
```json
{
    "status": "working",
    "confidence": 0.95,
    "timestamp": "2026-02-06T12:34:56.789Z",
    "details": {
        "tool": "Read",
        "context": "main.py"
    }
}
```

#### GET /api/history
æŸ¥è¯¢å†å²äº‹ä»¶

**å‚æ•°**:
- `start_time`: ISO 8601 æ—¶é—´æˆ³ï¼ˆå¯é€‰ï¼‰
- `end_time`: ISO 8601 æ—¶é—´æˆ³ï¼ˆå¯é€‰ï¼‰
- `limit`: è¿”å›æ•°é‡ï¼ˆé»˜è®¤ 100ï¼‰

**å“åº”**:
```json
{
    "events": [
        {
            "id": 1,
            "timestamp": "2026-02-06T12:34:56.789Z",
            "status": "working",
            "confidence": 0.95,
            "details": {...}
        }
    ],
    "total": 1
}
```

#### GET /api/tokens
è·å– Token ç»Ÿè®¡

**å“åº”**:
```json
{
    "total": {
        "input": 50000,
        "output": 20000,
        "cache_read": 10000,
        "cache_write": 5000
    },
    "runtime_seconds": 3600,
    "average_per_minute": {
        "input": 833.33,
        "output": 333.33
    },
    "cache_hit_rate": 0.167
}
```

---

## ç‰ˆæœ¬å†å²

### v4.1.2 (2026-02-06) - ğŸŒŸ PixelHQ æ•´åˆ

**æ ¸å¿ƒäº®ç‚¹**:
- âœ… **27 ç§å·¥å…·æ”¯æŒ** - å®Œå…¨è¦†ç›– PixelHQ-bridge å·¥å…·
- âœ… **100% PixelHQ è¦†ç›–** - æ¯”å‚è€ƒé¡¹ç›®æ›´å®Œå–„
- âœ… **3 ä¸ªæ–°å·¥å…·** - `EnterPlanMode`, `ExitPlanMode`, `NotebookEdit`
- âœ… **MCP é€šç”¨æ”¯æŒ** - è‡ªåŠ¨è¯†åˆ«ä»»æ„ MCP æœåŠ¡å™¨

**æ–°å¢åŠŸèƒ½**:
- ğŸ“‹ **è®¡åˆ’æ¨¡å¼æ”¯æŒ** - `EnterPlanMode`, `ExitPlanMode`
- ğŸ““ **Notebook ç¼–è¾‘** - `NotebookEdit` å·¥å…·æ”¯æŒ
- ğŸ¨ **ç‰¹æ®Šè¾“å‡º** - æ–°å·¥å…·çš„è‡ªå®šä¹‰å›¾æ ‡å’Œè¾“å‡º
- ğŸ“š **å®Œæ•´æ–‡æ¡£** - 11 ä¸ªåˆ†ææ–‡æ¡£å’ŒæŠ¥å‘Š

**æŠ€æœ¯éªŒè¯**:
- ğŸ” **ç¡¬ç¼–ç æœ€ä½³å®è·µ** - ä¸ PixelHQ-bridge ä¸€è‡´
- ğŸ“Š **å·¥å…·å‘½ååˆ†æ** - 27 ç§å·¥å…·å‘½åè§„å¾‹æ·±åº¦åˆ†æ
- ğŸŒ‰ **æ–¹æ¡ˆå¯¹æ¯”** - ä¸ PixelHQ-bridge è¯¦ç»†å¯¹æ¯”

**æ–‡æ¡£æ–°å¢**:
- `CHANGELOG-v4.1.2.md` - å®Œæ•´æ›´æ–°è®°å½•
- `docs/TOOL-NAMING-ANALYSIS.md` - å·¥å…·å‘½åè§„å¾‹
- `docs/PIXELHQ-TOOL-MAPPING-ANALYSIS.md` - PixelHQ å¯¹æ¯”
- `docs/PIXELHQ-INTEGRATION-SUMMARY.md` - æ•´åˆæ€»ç»“
- å¤šä¸ªæ·±åº¦åˆ†ææŠ¥å‘Š

### v4.1.1 (2026-02-06) - ğŸ”§ é…ç½®ä¼˜åŒ–

**åŠŸèƒ½æ”¹è¿›**:
- ğŸ”§ **é…ç½®å®Œå–„** - ä¼˜åŒ– Claude é…ç½®æ£€æµ‹
- ğŸ“ **æ—¥å¿—çº§åˆ«** - å®ç°å®Œæ•´çš„æ—¥å¿—çº§åˆ«ç³»ç»Ÿ
- ğŸ”Œ **MCP è§£æ** - é€šç”¨ MCP å·¥å…·è§£ææ–¹æ¡ˆ

### v4.0.0 (2026-02-06) - ğŸš€ é‡å¤§é‡æ„

**æ ¸å¿ƒæ”¹åŠ¨**:
- âœ… é‡‡ç”¨æ—¥å¿—ç›‘æ§æ–¹æ¡ˆï¼ˆå€Ÿé‰´ PixelHQ-bridgeï¼‰
- âœ… å¼ƒç”¨ç³»ç»Ÿ API æ£€æµ‹ï¼ˆçª—å£æ ‡é¢˜ã€CPU é˜ˆå€¼ï¼‰
- âœ… å¢åŠ å·¥å…·çº§çŠ¶æ€æ£€æµ‹
- âœ… å¢åŠ  Token ç»Ÿè®¡åŠŸèƒ½
- âœ… å¢åŠ éšç§ä¿æŠ¤æœºåˆ¶
- âœ… å¢åŠ äº‹ä»¶å†å²å­˜å‚¨

**æ–°å¢åŠŸèƒ½**:
- ğŸ“ ClaudeLogPluginï¼ˆæ—¥å¿—ç›‘æ§æ’ä»¶ï¼‰
- ğŸ”’ PrivacyFilterï¼ˆéšç§è¿‡æ»¤å™¨ï¼‰
- ğŸ“Š TokenStatsï¼ˆToken ç»Ÿè®¡å™¨ï¼‰
- ğŸ’¾ HistoryAdapterï¼ˆSQLite å†å²å­˜å‚¨ï¼‰

**ç§»é™¤åŠŸèƒ½**:
- âŒ WindowPluginï¼ˆçª—å£æ ‡é¢˜æ£€æµ‹ï¼‰- ä¿ç•™ä¸ºå·¥å…·æ¨¡å—
- âŒ ProcessPluginï¼ˆCPU é˜ˆå€¼æ£€æµ‹ï¼‰
- âŒ ClaudeCodePluginï¼ˆæ—§èåˆæ£€æµ‹ï¼‰

### v3.1.0 (2026-02-05) - å·²å½’æ¡£

**ç‰¹æ€§**:
- çª—å£æ ‡é¢˜æ£€æµ‹
- è¿›ç¨‹ CPU ç›‘æ§
- æ–‡ä»¶æ´»åŠ¨çŒœæµ‹
- å¤šæ–¹å¼èåˆ

**é—®é¢˜**:
- çª—å£æ ‡é¢˜ä¸åŒ…å«çŠ¶æ€ä¿¡æ¯
- CPU é˜ˆå€¼ä¸å‡†ç¡®
- æ–‡ä»¶ç›‘æ§æœªå®ç°
- è¯¯åˆ¤ä¸¥é‡

**å¤‡ä»½ä½ç½®**: `backup-v3.1/`

---

## è‡´è°¢

æœ¬é¡¹ç›®çš„æ—¥å¿—ç›‘æ§æ–¹æ¡ˆå—åˆ° [PixelHQ-bridge](https://github.com/example/pixelhq-bridge) çš„å¯å‘ï¼Œæ„Ÿè°¢å…¶å¼€æºè´¡çŒ®ã€‚

---

## è®¸å¯è¯

MIT License

---

**æœ€åæ›´æ–°**: 2026-02-06  
**ç»´æŠ¤è€…**: AI-ClaudeCat Team  
**é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/example/ai-claudecat/issues)
