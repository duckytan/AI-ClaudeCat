# Claude æ¡Œé¢å® ç‰©é¡¹ç›®

**çŠ¶æ€**ï¼šv3.1 æ ¸å¿ƒå®ç°ä¸­
**æœ€åæ›´æ–°**ï¼š2026-02-04

---

## ä¸­æ–‡å®ªæ³•

1. **è¯­è¨€è§„åˆ™**ï¼šå§‹ç»ˆä½¿ç”¨ä¸­æ–‡è¿›è¡Œå¯¹è¯ã€è¾“å‡ºå’Œæ–‡æ¡£ç¼–å†™
2. **ä»£ç æ³¨é‡Š**ï¼šä»£ç æ–‡ä»¶ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šï¼ˆç±»è¯´æ˜ã€å‡½æ•°è¯´æ˜ï¼‰
3. **æ–‡æ¡£è§„èŒƒ**ï¼šæ‰€æœ‰æ–‡æ¡£ï¼ˆ.md æ–‡ä»¶ï¼‰å¿…é¡»ä½¿ç”¨ä¸­æ–‡
4. **å‘½åè§„èŒƒ**ï¼šé¡¹ç›®ç‰¹å®šè¯æ±‡ä½¿ç”¨ä¸­æ–‡ï¼ˆå¦‚"è¿›ç¨‹ç›‘æ§"ã€"çŠ¶æ€èåˆ"ï¼‰
5. **ä¾‹å¤–æƒ…å†µ**ï¼šä»£ç æœ¬èº«ä¿æŒè‹±æ–‡ï¼ˆå˜é‡åã€å‡½æ•°åã€ç±»åï¼‰ï¼Œæ ‡å‡†åº“/API ä¿æŒè‹±æ–‡æœ¯è¯­

> **è¿åç¤ºä¾‹**ï¼šåˆ›å»ºè‹±æ–‡æ–‡æ¡£ã€ä½¿ç”¨è‹±æ–‡æ³¨é‡Š  
> **æ­£ç¡®ç¤ºä¾‹**ï¼šåˆ›å»ºä¸­æ–‡æ–‡æ¡£ã€ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š

---

## é¡¹ç›®æ¦‚è¿°

å¼€å‘ä¸€æ¬¾æ¡Œé¢å® ç‰©åº”ç”¨ï¼Œå®æ—¶ç›‘æ§ AI ç¼–ç¨‹å·¥å…·ï¼ˆClaude Code / OpenCode / Cursor ç­‰ï¼‰çš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶é€šè¿‡ä¸­é—´ä»¶æ¶æ„è¾“å‡ºçŠ¶æ€ï¼Œç”±å‰ç«¯æ˜¾ç¤ºå¯¹åº”çš„åŠ¨ç”»æ•ˆæœã€‚

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- **æ’ä»¶åŒ–ç›‘æ§æ¶æ„** - æ”¯æŒå¤šç§è½¯ä»¶çš„æ£€æµ‹æ’ä»¶ï¼Œå¯è‡ªç”±æ‰©å±•
- **ä¸­é—´ä»¶çŠ¶æ€èšåˆ** - ç»Ÿä¸€çš„äº‹ä»¶æ€»çº¿å’ŒçŠ¶æ€èåˆ
- **å¤šæ¨¡å¼è¾“å‡º** - WebSocket / HTTP / Redis ç­‰å¤šç§è¾“å‡ºæ–¹å¼
- **å‰ç«¯è§£è€¦** - å‰ç«¯é€šè¿‡æ ‡å‡†åè®®æ¥æ”¶çŠ¶æ€ï¼Œç‹¬ç«‹æ¼”åŒ–

---

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åç«¯ Middleware     â”‚          â”‚     å‰ç«¯ Frontend      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Plugin Layer         â”‚  JSON    â”‚  State Manager        â”‚
â”‚  â”œâ”€ Claude Plugin    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Animation Engine    â”‚
â”‚  â”œâ”€ OpenCode Plugin  â”‚          â”‚  GIF Display         â”‚
â”‚  â”œâ”€ Cursor Plugin    â”‚          â”‚  CSS Effects         â”‚
â”‚  â””â”€ Custom Plugin    â”‚          â”‚                      â”‚
â”‚                        â”‚          â”‚                      â”‚
â”‚  Middleware Core      â”‚          â”‚                      â”‚
â”‚  â”œâ”€ State Pool       â”‚          â”‚                      â”‚
â”‚  â”œâ”€ Event Bus        â”‚          â”‚                      â”‚
â”‚  â””â”€ Output Adapters  â”‚          â”‚                      â”‚
â”‚     â”œâ”€ WebSocket     â”‚          â”‚                      â”‚
â”‚     â”œâ”€ HTTP REST     â”‚          â”‚                      â”‚
â”‚     â””â”€ Redis Pub/Sub â”‚          â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | èŒè´£ | çŠ¶æ€ |
|------|------|------|
| **Plugin Base** | æ’ä»¶åŸºç±»æ¥å£ | è®¾è®¡å®Œæˆ |
| **ProcessPlugin** | è¿›ç¨‹ç›‘æ§ï¼ˆCPU/å†…å­˜ï¼‰ | å¯ç”¨ |
| **WindowPlugin** | çª—å£ç›‘æ§ï¼ˆæ ‡é¢˜/æ–‡æœ¬ï¼‰ | å¯ç”¨ |
| **Middleware Core** | çŠ¶æ€èšåˆã€äº‹ä»¶æ€»çº¿ | è®¾è®¡å®Œæˆ |
| **Output Adapters** | WebSocket/HTTP/Redis è¾“å‡º | è®¾è®¡å®Œæˆ |
| **Frontend Core** | å‰ç«¯çŠ¶æ€ç®¡ç† | å¾…å¼€å‘ |
| **Animation Engine** | åŠ¨ç”»æ’­æ”¾å¼•æ“ | å¾…å¼€å‘ |

---

## æ’ä»¶ç³»ç»Ÿ

### æ’ä»¶ç±»å‹

| ç±»å‹ | æ£€æµ‹æ–¹å¼ | é€‚ç”¨è½¯ä»¶ |
|------|----------|----------|
| **ProcessPlugin** | è¿›ç¨‹ CPU/å†…å­˜ | Claude Codeã€OpenCodeã€Cursor |
| **WindowPlugin** | çª—å£æ ‡é¢˜/æ–‡æœ¬ | ç»ˆç«¯ã€IDEã€èŠå¤©è½¯ä»¶ |
| **FilePlugin** | æ–‡ä»¶å˜æ›´ | Gitã€æ–‡ä»¶åŒæ­¥ |
| **HttpPlugin** | HTTP API | Web æœåŠ¡ |
| **CustomPlugin** | è‡ªå®šä¹‰é€»è¾‘ | ç‰¹æ®Šéœ€æ±‚ |

### æ’ä»¶æ¥å£

```python
class BasePlugin(ABC):
    @abstractmethod
    def check_available(self) -> bool:
        """æ£€æŸ¥ç›®æ ‡æ˜¯å¦å¯ç”¨"""
    
    @abstractmethod
    def detect(self) -> StateEvent:
        """æ£€æµ‹çŠ¶æ€"""
    
    def on_event(self, event: StateEvent):
        """æ¥æ”¶å…¶ä»–æ’ä»¶äº‹ä»¶ï¼ˆå¯é€‰ï¼‰"""
```

### ç‹¬ç«‹è¿è¡Œ

æ’ä»¶æ”¯æŒç‹¬ç«‹è¿è¡Œï¼Œæ–¹ä¾¿å¼€å‘å’Œæµ‹è¯•ã€‚

```bash
# è¿è¡Œè¿›ç¨‹ç›‘æ§æ’ä»¶ï¼ˆé»˜è®¤é…ç½®ï¼‰
python -m src.plugins.process

# æŒ‡å®šç›‘æ§è¿›ç¨‹åç§°
python -m src.plugins.process --process-names claude,anthropic

# æŒ‡å®šæ£€æµ‹é—´éš”ï¼ˆç§’ï¼‰
python -m src.plugins.process --interval 1.0

# æ˜¾ç¤ºå¸®åŠ©
python -m src.plugins.process --help
```

**è¿è¡Œæ•ˆæœ**ï¼š
```
[2024-01-01 12:00:00] IDLE (confidence: 90%) - cpu: 0.3%
[2024-01-01 12:00:02] THINKING (confidence: 80%) - cpu: 8.5%
[2024-01-01 12:00:04] WORKING (confidence: 85%) - cpu: 35.2%
...
```

---

## è¾“å‡ºæ¨¡å¼

| æ¨¡å¼ | åè®® | é€‚ç”¨åœºæ™¯ | å»¶è¿Ÿ |
|------|------|----------|------|
| **WebSocket** | ws:// | å®æ—¶å‰ç«¯æ¨é€ | < 10ms |
| **HTTP REST** | http:// | è½®è¯¢è·å–çŠ¶æ€ | è½®è¯¢é—´éš” |
| **Redis Pub/Sub** | redis:// | å¤šå®ä¾‹åŒæ­¥ | < 1ms |
| **MQTT** | mqtt:// | IoT è®¾å¤‡ | < 100ms |
| **WebHook** | http:// | å¤–éƒ¨æœåŠ¡é›†æˆ | ç½‘ç»œå»¶è¿Ÿ |

---

## æŠ€æœ¯æ ˆ

| ç±»åˆ« | é€‰æ‹© |
|------|------|
| **è¯­è¨€** | Python 3.9+ |
| **è¿›ç¨‹ç›‘æ§** | psutil |
| **æ–‡ä»¶ç›‘æ§** | watchdog |
| **WebSocket** | websockets |
| **HTTP** | Flask |
| **Redis** | redis-py |
| **å‰ç«¯** | WebView / Electron / tkinter |

---

## ç›®å½•ç»“æ„

```
AI-ClaudeCat/
â”œâ”€â”€ CLAUDE.md                              # æœ¬æ–‡æ¡£ â­
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ å®Œæ•´æ¶æ„è®¾è®¡.md                    # v3.0 æ€»ä½“æ¶æ„
â”‚   â”œâ”€â”€ æ’ä»¶åŒ–æ¶æ„è¯¦ç»†è®¾è®¡.md              # v3.1 æ’ä»¶å’Œè¾“å‡ºè¯¦ç»†è®¾è®¡ â­
â”‚   â””â”€â”€ research_notes.md                  # æŠ€æœ¯ç ”ç©¶ç¬”è®°
â”œâ”€â”€ docs-archive/                          # å†å²æ–‡æ¡£
â”‚   â””â”€â”€ old-prototype-v1.0/                # v1.0 åŸå‹ (å·²åºŸå¼ƒ)
â”‚       â”œâ”€â”€ VERSION.json                   # ç‰ˆæœ¬å…ƒä¿¡æ¯
â”‚       â”œâ”€â”€ README.md                      # å½’æ¡£è¯´æ˜
â”‚       â”œâ”€â”€ EXPERIENCE_SUMMARY.md          # ç»éªŒæ€»ç»“ â­
â”‚       â””â”€â”€ src/monitor/                  # æ—§ç‰ˆåŸå‹ä»£ç 
â”œâ”€â”€ src/                                  # æºä»£ç 
â”‚   â”œâ”€â”€ plugins/                          # æ’ä»¶ (v3.1)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ __main__.py                   # æ’ä»¶ç‹¬ç«‹è¿è¡Œå…¥å£
â”‚   â”‚   â”œâ”€â”€ base.py                      # æ’ä»¶åŸºç±» â­
â”‚   â”‚   â”œâ”€â”€ claude_code.py               # Claude Code æ’ä»¶ âœ…
â”‚   â”‚   â”œâ”€â”€ process.py                   # è¿›ç¨‹ç›‘æ§æ’ä»¶
â”‚   â”‚   â””â”€â”€ window.py                    # çª—å£ç›‘æ§æ’ä»¶
â”‚   â”œâ”€â”€ middleware/                       # ä¸­é—´ä»¶ (å¾…å®ç°)
â”‚   â”‚   â”œâ”€â”€ core.py
â”‚   â”‚   â”œâ”€â”€ event_bus.py
â”‚   â”‚   â””â”€â”€ fusion.py
â”‚   â””â”€â”€ adapters/                        # è¾“å‡ºé€‚é…å™¨ (å¾…å®ç°)
â”‚       â”œâ”€â”€ websocket.py
â”‚       â”œâ”€â”€ http.py
â”‚       â””â”€â”€ redis.py
â””â”€â”€ frontend/                            # å‰ç«¯ (å¾…å¼€å‘)
```

---

## å¼€å‘çŠ¶æ€

### å·²å®Œæˆ âœ…

- [x] æ¶æ„è®¾è®¡ï¼ˆv3.1 æ’ä»¶åŒ–æ¶æ„ï¼‰
- [x] æ’ä»¶æ¥å£è®¾è®¡æ–‡æ¡£
- [x] è¾“å‡ºæ¨¡å¼è®¾è®¡æ–‡æ¡£
- [x] æŠ€æœ¯ç ”ç©¶ç¬”è®°
- [x] æ’ä»¶åŸºç±» (src/plugins/base.py)
- [x] è¿›ç¨‹ç›‘æ§æ’ä»¶ (src/plugins/process.py)
- [x] Claude Code æ’ä»¶ (src/plugins/claude_code.py) âœ…
- [x] æ’ä»¶ç‹¬ç«‹è¿è¡Œå…¥å£ (src/plugins/__main__.py)

### è¿›è¡Œä¸­ ğŸ”„

- [ ] å®ç°ä¸­é—´ä»¶æ ¸å¿ƒ
- [ ] å®ç° WebSocket è¾“å‡ºé€‚é…å™¨
- [ ] å®ç° OpenCode æ’ä»¶

### å¾…å®Œæˆ â³

- [ ] HTTP REST è¾“å‡ºé€‚é…å™¨
- [ ] Redis Pub/Sub è¾“å‡ºé€‚é…å™¨
- [ ] å‰ç«¯ GUI
- [ ] åŠ¨ç”»å¼•æ“
- [ ] é…ç½®ç³»ç»Ÿ

### å·²åºŸå¼ƒ âŒ

- [x] v1.0 åŸå‹ (src/monitor/, scripts/) â†’ docs-archive/old-prototype-v1.0/

---

## çŠ¶æ€æ£€æµ‹èƒ½åŠ›

### å½“å‰æ”¯æŒçš„çŠ¶æ€

| çŠ¶æ€ | è¯´æ˜ | æ£€æµ‹æ–¹å¼ |
|------|------|----------|
| **unknown** | æœªçŸ¥ | é»˜è®¤ |
| **idle** | å¾…æœº/ç©ºé—² | CPU < é˜ˆå€¼ |
| **running** | è¿è¡Œä¸­ | CPU ä½è´Ÿè½½ |
| **thinking** | æ€è€ƒä¸­ | CPU ä¸­è´Ÿè½½ + å…³é”®è¯ |
| **working** | å·¥ä½œ/å¿™ç¢Œ | CPU é«˜è´Ÿè½½ |
| **executing** | æ‰§è¡Œå‘½ä»¤ | è¿›ç¨‹æ´»åŠ¨ |
| **error** | é”™è¯¯ | çª—å£æ ‡é¢˜/å¼‚å¸¸ |
| **stopped** | å·²åœæ­¢ | è¿›ç¨‹ä¸å­˜åœ¨ |

### æ’ä»¶æ£€æµ‹æ–¹å¼

| æ–¹å¼ | ç›®æ ‡ | çŠ¶æ€ |
|------|------|------|
| **è¿›ç¨‹ç›‘æ§** | CPU/å†…å­˜å ç”¨ | âœ… éªŒè¯ |
| **æ–‡ä»¶ç›‘æ§** | ç›®å½•å˜æ›´ | âœ… éªŒè¯ |
| **çª—å£ç›‘æ§** | çª—å£æ ‡é¢˜ | âœ… éªŒè¯ |

---

## æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| **docs/æ’ä»¶åŒ–æ¶æ„è¯¦ç»†è®¾è®¡.md** | æ’ä»¶è®¾è®¡ã€è¾“å‡ºæ¨¡å¼ã€å¼€å‘æŒ‡å— | â­â­â­ |
| **docs/å®Œæ•´æ¶æ„è®¾è®¡.md** | æ€»ä½“æ¶æ„ã€ç»„ä»¶è®¾è®¡ | â­â­ |
| **docs/research_notes.md** | æŠ€æœ¯ç ”ç©¶ã€ä»£ç ç¤ºä¾‹ | â­â­ |
| **src/** | æºä»£ç  | â­â­â­ |

---

## æ³¨æ„äº‹é¡¹

- é¡¹ç›®å¤„äº**æ ¸å¿ƒå®ç°é˜¶æ®µ**ï¼Œæ’ä»¶åŸºç±»å·²å®Œæˆ
- æ’ä»¶ç³»ç»Ÿæ”¯æŒè‡ªç”±æ‰©å±•ï¼Œå¯é€‚é…å¤šç§è½¯ä»¶
- å‰ç«¯ä¸åç«¯é€šè¿‡æ ‡å‡†åè®®è§£è€¦
- v1.0 åŸå‹å·²è¿ç§»è‡³ `docs-archive/old-prototype-v1.0/`
- **è¿ç§»ç»éªŒ**: è¯¦è§ `docs-archive/old-prototype-v1.0/EXPERIENCE_SUMMARY.md`

---

## æ’ä»¶å¼€å‘

### å¼€å‘æ–°æ’ä»¶

1. ç¡®å®šæ’ä»¶ç±»å‹ï¼ˆProcess/Window/File/Http/Customï¼‰
2. ç»§æ‰¿å¯¹åº”åŸºç±»
3. å®ç°å¿…éœ€æ–¹æ³•
4. é…ç½®å…ƒä¿¡æ¯
5. æ³¨å†Œæ’ä»¶

### è¾“å‡ºé›†æˆ

- å‰ç«¯é€šè¿‡ WebSocket è¿æ¥è·å–å®æ—¶çŠ¶æ€
- æˆ–é€šè¿‡ HTTP API è½®è¯¢è·å–
- å¤šå®ä¾‹é€šè¿‡ Redis Pub/Sub åŒæ­¥

---

**æ–‡æ¡£ç‰ˆæœ¬**: v3.1
**æœ€åæ›´æ–°**: 2026-02-04
